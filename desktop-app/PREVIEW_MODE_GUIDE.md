# ğŸ–¼ï¸ HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Preview Mode

## TÃ­nh NÄƒng Má»›i: TÃ¹y Chá»n Hiá»ƒn Thá»‹ áº¢nh Preview

Khi tiáº¿p tá»¥c scan tá»« láº§n trÆ°á»›c (Resume), báº¡n cÃ³ thá»ƒ chá»n cÃ¡ch hiá»ƒn thá»‹ áº£nh preview Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t vÃ  tiáº¿t kiá»‡m RAM.

## 3 Cháº¿ Äá»™ Preview:

### 1. ğŸš€ KhÃ´ng Load áº¢nh
- **Æ¯u Ä‘iá»ƒm**: Nhanh nháº¥t, tiáº¿t kiá»‡m RAM tá»‘i Ä‘a
- **NhÆ°á»£c Ä‘iá»ƒm**: KhÃ´ng thá»ƒ xem trÆ°á»›c áº£nh tÃ i liá»‡u
- **PhÃ¹ há»£p cho**: 
  - MÃ¡y cÃ³ RAM tháº¥p (< 8GB)
  - QuÃ©t thÆ° má»¥c cÃ³ ráº¥t nhiá»u file (> 100 files)
  - Chá»‰ cáº§n káº¿t quáº£ phÃ¢n loáº¡i, khÃ´ng cáº§n xem áº£nh

### 2. â­ Chá»‰ Load áº¢nh GCN (Khuyáº¿n Nghá»‹)
- **Æ¯u Ä‘iá»ƒm**: CÃ¢n báº±ng giá»¯a hiá»‡u suáº¥t vÃ  tiá»‡n lá»£i
- **NhÆ°á»£c Ä‘iá»ƒm**: KhÃ´ng xem Ä‘Æ°á»£c áº£nh cá»§a cÃ¡c tÃ i liá»‡u khÃ¡c (PCT, CCCD, v.v.)
- **PhÃ¹ há»£p cho**: 
  - Háº§u háº¿t trÆ°á»ng há»£p sá»­ dá»¥ng
  - Táº­p trung vÃ o tÃ i liá»‡u GCN (quan trá»ng nháº¥t)
  - MÃ¡y cÃ³ RAM trung bÃ¬nh (8-16GB)

### 3. ğŸ“¸ Load Táº¥t Cáº£ áº¢nh
- **Æ¯u Ä‘iá»ƒm**: Äáº§y Ä‘á»§, xem Ä‘Æ°á»£c táº¥t cáº£ áº£nh preview
- **NhÆ°á»£c Ä‘iá»ƒm**: CÃ³ thá»ƒ cháº­m, tá»‘n RAM náº¿u cÃ³ quÃ¡ nhiá»u file
- **PhÃ¹ há»£p cho**: 
  - MÃ¡y cÃ³ RAM cao (> 16GB)
  - QuÃ©t Ã­t file (< 50 files)
  - Cáº§n kiá»ƒm tra chi tiáº¿t táº¥t cáº£ tÃ i liá»‡u

## CÃ¡ch Sá»­ Dá»¥ng:

### Khi Resume Scan:
1. Má»Ÿ app â†’ Xuáº¥t hiá»‡n dialog "Tiáº¿p Tá»¥c Scan?"
2. Chá»n má»™t trong 3 options:
   - âšª KhÃ´ng load áº£nh
   - ğŸŸ¢ Chá»‰ load áº£nh GCN (máº·c Ä‘á»‹nh - khuyáº¿n nghá»‹)
   - âšª Load táº¥t cáº£ áº£nh
3. Nháº¥n "â–¶ï¸ Tiáº¿p Tá»¥c Scan"

### Trong QuÃ¡ TrÃ¬nh Xem Káº¿t Quáº£:
- Náº¿u chá»n "KhÃ´ng load áº£nh" hoáº·c "Chá»‰ load áº£nh GCN", báº¡n sáº½ tháº¥y badge mÃ u xanh á»Ÿ trÃªn cÃ¹ng
- Nháº¥n nÃºt "Äá»•i cháº¿ Ä‘á»™" Ä‘á»ƒ chuyá»ƒn sang cháº¿ Ä‘á»™ khÃ¡c:
  - KhÃ´ng load â†’ Chá»‰ GCN â†’ Táº¥t cáº£ â†’ KhÃ´ng load (vÃ²ng trÃ²n)

## LÆ°u Ã Quan Trá»ng:

### Vá» Lazy Loading:
- Preview chá»‰ Ä‘Æ°á»£c load **khi báº¡n chuyá»ƒn Ä‘áº¿n tab Ä‘Ã³**
- Tab chÆ°a má»Ÿ = chÆ°a load preview â†’ tiáº¿t kiá»‡m RAM
- Khi Ä‘á»•i cháº¿ Ä‘á»™, preview sáº½ Ä‘Æ°á»£c load láº¡i theo cháº¿ Ä‘á»™ má»›i

### Vá» Performance:
- **"KhÃ´ng load áº£nh"**: App cÃ³ thá»ƒ xá»­ lÃ½ hÃ ng trÄƒm files mÃ  khÃ´ng bá»‹ crash
- **"Chá»‰ load áº£nh GCN"**: ThÆ°á»ng chá»‰ load 10-30% sá»‘ áº£nh (GCN chiáº¿m ~20-30% tÃ i liá»‡u)
- **"Load táº¥t cáº£"**: CÃ³ thá»ƒ crash náº¿u cÃ³ quÃ¡ nhiá»u file (> 200 files vá»›i nhiá»u tabs)

### Best Practices:
1. **Láº§n Ä‘áº§u resume**: Chá»n "Chá»‰ load áº£nh GCN" (máº·c Ä‘á»‹nh)
2. **Náº¿u cáº§n xem áº£nh khÃ¡c**: Äá»•i sang "Load táº¥t cáº£" sau khi resume
3. **Náº¿u bá»‹ lag**: Äá»•i vá» "KhÃ´ng load áº£nh" hoáº·c "Chá»‰ GCN"
4. **MÃ¡y yáº¿u**: LuÃ´n dÃ¹ng "KhÃ´ng load áº£nh" hoáº·c "Chá»‰ GCN"

## Technical Details:

### Memory Impact:
- Má»—i áº£nh base64: ~200-500KB RAM
- 100 áº£nh = ~20-50MB RAM
- 10 tabs Ã— 50 áº£nh = ~100-250MB RAM (cÃ³ thá»ƒ gÃ¢y crash)

### Lazy Loading Mechanism:
- Preview Ä‘Æ°á»£c load **on-demand** khi user chuyá»ƒn tab
- Chá»‰ tab active Ä‘Æ°á»£c load preview
- Preview Ä‘Æ°á»£c cache sau khi load (khÃ´ng load láº¡i)

### Preview Mode Logic:
```javascript
// none: KhÃ´ng load preview nÃ o
// gcn-only: Chá»‰ load náº¿u short_code = 'GCNC' || 'GCNM' || 'GCN'
// all: Load táº¥t cáº£ preview
```

## Troubleshooting:

### Q: TÃ´i Ä‘Ã£ chá»n "Load táº¥t cáº£" nhÆ°ng khÃ´ng tháº¥y áº£nh?
A: Chuyá»ƒn sang tab khÃ¡c rá»“i chuyá»ƒn láº¡i. Preview Ä‘Æ°á»£c load theo tá»«ng tab.

### Q: App váº«n bá»‹ lag/crash?
A: 
1. Äá»•i vá» cháº¿ Ä‘á»™ "KhÃ´ng load áº£nh"
2. Giáº£m sá»‘ lÆ°á»£ng file hiá»ƒn thá»‹ (dÃ¹ng pagination)
3. XÃ³a cÃ¡c tab khÃ´ng cáº§n thiáº¿t

### Q: LÃ m sao Ä‘á»ƒ load láº¡i preview?
A: Äá»•i cháº¿ Ä‘á»™ â†’ chuyá»ƒn sang tab khÃ¡c â†’ chuyá»ƒn láº¡i vá» tab cÅ©

### Q: Táº¡i sao khÃ´ng load táº¥t cáº£ áº£nh tá»« Ä‘áº§u nhÆ° trÆ°á»›c?
A: Äá»ƒ trÃ¡nh crash khi cÃ³ quÃ¡ nhiá»u tabs/files. Lazy loading giÃºp app á»•n Ä‘á»‹nh hÆ¡n.

---

**Cáº­p nháº­t**: 12/01/2025  
**Version**: 1.2.0  
**TÃ¡c giáº£**: AI Developer
